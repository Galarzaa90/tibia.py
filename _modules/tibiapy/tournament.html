
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tibiapy.tournament &#8212; Tibia.py 5.6.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/custom.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Tibia.py 5.6.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">tibiapy.tournament</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for tibiapy.tournament</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Models related to the tournaments section in Tibia.com and the tournaments leaderboards.&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">TYPE_CHECKING</span>

<span class="kn">from</span> <span class="nn">tibiapy</span> <span class="kn">import</span> <span class="n">abc</span>
<span class="kn">from</span> <span class="nn">tibiapy.enums</span> <span class="kn">import</span> <span class="n">PvpType</span><span class="p">,</span> <span class="n">TournamentPhase</span><span class="p">,</span> <span class="n">Vocation</span>
<span class="kn">from</span> <span class="nn">tibiapy.errors</span> <span class="kn">import</span> <span class="n">InvalidContent</span>
<span class="kn">from</span> <span class="nn">tibiapy.utils</span> <span class="kn">import</span> <span class="n">get_tibia_url</span><span class="p">,</span> <span class="n">parse_integer</span><span class="p">,</span> <span class="n">parse_popup</span><span class="p">,</span> <span class="n">parse_tibia_datetime</span><span class="p">,</span> <span class="n">parse_tibia_full_date</span><span class="p">,</span> \
    <span class="n">parse_tibiacom_content</span><span class="p">,</span> <span class="n">split_list</span><span class="p">,</span> <span class="n">try_enum</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">bs4</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;TournamentLeaderboardEntry&quot;</span><span class="p">,</span>
    <span class="s2">&quot;TournamentEntry&quot;</span><span class="p">,</span>
    <span class="s2">&quot;RewardEntry&quot;</span><span class="p">,</span>
    <span class="s2">&quot;RuleSet&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ScoreSet&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Tournament&quot;</span><span class="p">,</span>
    <span class="s2">&quot;TournamentLeaderboard&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">RANGE_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d+)(?:-(\d+))?&#39;</span><span class="p">)</span>
<span class="n">CUP_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\w+ cup)&#39;</span><span class="p">)</span>
<span class="n">DEED_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\w+ deed)&#39;</span><span class="p">)</span>
<span class="n">ARCHIVE_LIST_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([\w\s]+)\s\(([^-]+)-\s([^)]+)\)&#39;</span><span class="p">)</span>
<span class="n">RANK_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d+)\.\s\(\+?(-?\d+)\)&#39;</span><span class="p">)</span>
<span class="n">RESULTS_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Results: (\d+)&#39;</span><span class="p">)</span>
<span class="n">CURRENT_TOURNAMENT_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?:.*- (\w+))&#39;</span><span class="p">)</span>

<span class="n">TOURNAMENT_LEADERBOARDS_URL</span> <span class="o">=</span> <span class="s2">&quot;https://www.tibia.com/community/?subtopic=tournamentleaderboard&quot;</span>


<div class="viewcode-block" id="TournamentLeaderboardEntry"><a class="viewcode-back" href="../../api.html#tibiapy.TournamentLeaderboardEntry">[docs]</a><span class="k">class</span> <span class="nc">TournamentLeaderboardEntry</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">BaseCharacter</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a single tournament leaderboard&#39;s entry.</span>

<span class="sd">    .. versionadded:: 2.5.0</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    name: :class:`str`</span>
<span class="sd">        The character&#39;s name.</span>
<span class="sd">    rank: :class:`int`</span>
<span class="sd">        The entry&#39;s rank.</span>
<span class="sd">    change: :class:`int`</span>
<span class="sd">        The entry&#39;s change in rank since the last server save.</span>
<span class="sd">    vocation: :class:`Vocation`</span>
<span class="sd">        The character&#39;s vocation. This will always show the base vocation, without promotions.</span>
<span class="sd">    score: :class:`int`</span>
<span class="sd">        The entry&#39;s score.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rank&quot;</span><span class="p">,</span>
        <span class="s2">&quot;change&quot;</span><span class="p">,</span>
        <span class="s2">&quot;vocation&quot;</span><span class="p">,</span>
        <span class="s2">&quot;score&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rank</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rank&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vocation</span><span class="p">:</span> <span class="n">Vocation</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;vocation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;score&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{0.__class__.__name__}</span><span class="s2"> rank=</span><span class="si">{0.rank}</span><span class="s2"> name=</span><span class="si">{0.name!r}</span><span class="s2"> vocation=</span><span class="si">{0.vocation!r}</span><span class="s2"> &quot;</span> \
               <span class="s2">&quot;points=</span><span class="si">{0.score}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="TournamentEntry"><a class="viewcode-back" href="../../api.html#tibiapy.TournamentEntry">[docs]</a><span class="k">class</span> <span class="nc">TournamentEntry</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">BaseTournament</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an tournament in the archived tournaments list.</span>

<span class="sd">    :py:attr:`start_date` and :py:attr:`end_date` might be :obj:`None` when a tournament that is currently running</span>
<span class="sd">    is on the list (e.g. on the leaderboards tournament selection section).</span>

<span class="sd">    .. versionadded:: 2.5.0</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    title: :class:`str`</span>
<span class="sd">        The title of the tournament.</span>
<span class="sd">    cycle: :class:`int`</span>
<span class="sd">        An internal number used to get direct access to a specific tournament in the archive.</span>
<span class="sd">    start_date: :class:`datetime.date`</span>
<span class="sd">        The start date of the tournament.</span>
<span class="sd">    end_date: :class:`datetime.date`</span>
<span class="sd">        The end date of the tournament.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;title&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cycle&quot;</span><span class="p">,</span>
        <span class="s2">&quot;start_date&quot;</span><span class="p">,</span>
        <span class="s2">&quot;end_date&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">_serializable_properties</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;duration&quot;</span><span class="p">,)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">start_date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">end_date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cycle&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{0.__class__.__name__}</span><span class="s2"> title=</span><span class="si">{0.title!r}</span><span class="s2"> cycle=</span><span class="si">{0.cycle}</span><span class="s2"> start_date=</span><span class="si">{0.start_date!r}</span><span class="s2"> &quot;</span> \
               <span class="s2">&quot;end_date=</span><span class="si">{0.end_date!r}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">duration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`datetime.timedelta`: The total duration of the tournament.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_date</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_date</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="RewardEntry"><a class="viewcode-back" href="../../api.html#tibiapy.RewardEntry">[docs]</a><span class="k">class</span> <span class="nc">RewardEntry</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the rewards for a specific rank range.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    initial_rank: :class:`int`</span>
<span class="sd">        The highest rank that gets this reward.</span>
<span class="sd">    last_rank: :class:`int`</span>
<span class="sd">        The lowest rank that gets this reward.</span>
<span class="sd">    tibia_coins: :class`int`</span>
<span class="sd">        The amount of tibia coins awarded.</span>
<span class="sd">    tournament_coins: :class:`int`</span>
<span class="sd">        The amount of tournament coins awarded.</span>
<span class="sd">    tournament_ticket_voucher: :class:`int`</span>
<span class="sd">        The amount of tournament ticker vouchers awarded.</span>
<span class="sd">    cup: :class:`str`</span>
<span class="sd">        The type of cup awarded.</span>
<span class="sd">    deed: :class:`str`</span>
<span class="sd">        The type of deed awarded.</span>
<span class="sd">    other_rewards: :class:`str`</span>
<span class="sd">        Other rewards given for this rank.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;initial_rank&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_rank&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tibia_coins&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tournament_coins&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tournament_ticker_voucher&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cup&quot;</span><span class="p">,</span>
        <span class="s2">&quot;deed&quot;</span><span class="p">,</span>
        <span class="s2">&quot;other_rewards&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initial_rank</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;initial_rank&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_rank</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_rank&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tibia_coins</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tibia_coins&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tournament_coins</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tournament_coins&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tournament_ticker_voucher</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tournament_ticker_voucher&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cup</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cup&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deed</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;deed&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">other_rewards</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;other_rewards&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__slots__</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
            <span class="n">attributes</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">v</span><span class="si">!r}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}{</span><span class="n">attributes</span><span class="si">}</span><span class="s2">&gt;&quot;</span></div>


<div class="viewcode-block" id="RuleSet"><a class="viewcode-back" href="../../api.html#tibiapy.RuleSet">[docs]</a><span class="k">class</span> <span class="nc">RuleSet</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Contains the tournament rule set.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    pvp_type: :class:`PvPType`</span>
<span class="sd">        The PvP type of the tournament.</span>
<span class="sd">    daily_tournament_playtime: :class:`datetime.timedelta`</span>
<span class="sd">        The maximum amount of time participants can play each day.</span>
<span class="sd">    total_tournament_playtime: :class:`datetime.timedelta`</span>
<span class="sd">        The total amount of time participants can play in the tournament.</span>
<span class="sd">    playtime_reduced_only_in_combat: :class:`bool`</span>
<span class="sd">        Whether playtime will only be reduced while in combat or not.</span>
<span class="sd">    death_penalty_modifier: :class:`float`</span>
<span class="sd">        The modifier for the death penalty.</span>
<span class="sd">    xp_multiplier: :class:`float`</span>
<span class="sd">        The multiplier for experience gained.</span>
<span class="sd">    skill_multiplier: :class:`float`</span>
<span class="sd">        The multiplier for skill gained.</span>
<span class="sd">    spawn_rate_multiplier: :class:`float`</span>
<span class="sd">        The multiplier for the spawn rate.</span>
<span class="sd">    loot_probability: :class:`float`</span>
<span class="sd">        The multiplier for the loot rate.</span>
<span class="sd">    rent_percentage: :class:`int`</span>
<span class="sd">        The percentage of rent prices relative to the regular price.</span>
<span class="sd">    house_auction_durations: :class:`int`</span>
<span class="sd">        The duration of house auctions.</span>
<span class="sd">    shared_xp_bonus: :class:`bool`</span>
<span class="sd">        Whether there is a bonus for sharing experience or not.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;pvp_type&quot;</span><span class="p">,</span>
        <span class="s2">&quot;daily_tournament_playtime&quot;</span><span class="p">,</span>
        <span class="s2">&quot;total_tournament_playtime&quot;</span><span class="p">,</span>
        <span class="s2">&quot;playtime_reduced_only_in_combat&quot;</span><span class="p">,</span>
        <span class="s2">&quot;death_penalty_modifier&quot;</span><span class="p">,</span>
        <span class="s2">&quot;xp_multiplier&quot;</span><span class="p">,</span>
        <span class="s2">&quot;skill_multiplier&quot;</span><span class="p">,</span>
        <span class="s2">&quot;spawn_rate_multiplier&quot;</span><span class="p">,</span>
        <span class="s2">&quot;loot_probability&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rent_percentage&quot;</span><span class="p">,</span>
        <span class="s2">&quot;house_auction_durations&quot;</span><span class="p">,</span>
        <span class="s2">&quot;shared_xp_bonus&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pvp_type</span> <span class="o">=</span> <span class="n">try_enum</span><span class="p">(</span><span class="n">PvpType</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pvp_type&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">daily_tournament_playtime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_try_parse_interval</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;daily_tournament_playtime&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_tournament_playtime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_try_parse_interval</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;total_tournament_playtime&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">playtime_reduced_only_in_combat</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;playtime_reduced_only_in_combat&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">death_penalty_modifier</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;death_penalty_modifier&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xp_multiplier</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;xp_multiplier&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skill_multiplier</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;skill_multiplier&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spawn_rate_multiplier</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;spawn_rate_multiplier&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loot_probability</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;loot_probability&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rent_percentage</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rent_percentage&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">house_auction_durations</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;house_auction_durations&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shared_xp_bonus</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;shared_xp_bonus&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__slots__</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
            <span class="n">attributes</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">v</span><span class="si">!r}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}{</span><span class="n">attributes</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_try_parse_interval</span><span class="p">(</span><span class="n">interval</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">interval</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">interval</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="ScoreSet"><a class="viewcode-back" href="../../api.html#tibiapy.ScoreSet">[docs]</a><span class="k">class</span> <span class="nc">ScoreSet</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the ways to earn or lose points in the tournament.</span>

<span class="sd">    .. versionadded:: 2.5.0</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    creature_kills: :class:`dict`</span>
<span class="sd">        Points received for participating in creature kills.</span>
<span class="sd">    level_gain_loss: :class:`int`</span>
<span class="sd">        The points gained for leveling up or lost for losing a level.</span>
<span class="sd">    skill_gain_loss: :class:`int`</span>
<span class="sd">        The points gained for leveling up or lost for losing a skill level.</span>
<span class="sd">    charm_point_multiplier: :class:`int`</span>
<span class="sd">        The multiplier for every charm point.</span>
<span class="sd">    character_death: :class:`int`</span>
<span class="sd">        The points lost for dying.</span>
<span class="sd">    area_discovery: :class:`int`</span>
<span class="sd">        Points that will be added to the score for discovering an area entirely.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;creature_kills&quot;</span><span class="p">,</span>
        <span class="s2">&quot;level_gain_loss&quot;</span><span class="p">,</span>
        <span class="s2">&quot;skill_gain_loss&quot;</span><span class="p">,</span>
        <span class="s2">&quot;charm_point_multiplier&quot;</span><span class="p">,</span>
        <span class="s2">&quot;character_death&quot;</span><span class="p">,</span>
        <span class="s2">&quot;area_discovery&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">creature_kills</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;creature_kills&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level_gain_loss</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;level_gain_loss&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skill_gain_loss</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;skill_gain_loss&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">charm_point_multiplier</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;charm_point_multiplier&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">character_death</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;character_death&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area_discovery</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;area_discovery&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__slots__</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
            <span class="n">attributes</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">v</span><span class="si">!r}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}{</span><span class="n">attributes</span><span class="si">}</span><span class="s2">&gt;&quot;</span></div>


<div class="viewcode-block" id="Tournament"><a class="viewcode-back" href="../../api.html#tibiapy.Tournament">[docs]</a><span class="k">class</span> <span class="nc">Tournament</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">BaseTournament</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a tournament&#39;s information.</span>

<span class="sd">    .. versionadded:: 2.5.0</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    title: :class:`str`</span>
<span class="sd">        The title of the tournament.</span>
<span class="sd">    cycle: :class:`int`</span>
<span class="sd">        An internal number used to get direct access to a specific tournament in the archive.</span>

<span class="sd">        This will only be present when viewing an archived tournament, otherwise it will default to 0.</span>
<span class="sd">    phase: :class:`TournamentPhase`</span>
<span class="sd">        The current phase of the tournament.</span>
<span class="sd">    start_date: :class:`datetime.datetime`</span>
<span class="sd">        The start date of the tournament.</span>
<span class="sd">    end_date: :class:`datetime.datetime`</span>
<span class="sd">        The end date of the tournament.</span>
<span class="sd">    worlds: :obj:`list` of :class:`str`</span>
<span class="sd">        The worlds where this tournament is active on.</span>
<span class="sd">    rule_set: :class:`RuleSet`</span>
<span class="sd">        The specific rules for this tournament.</span>
<span class="sd">    score_set: :class:`ScoreSet`</span>
<span class="sd">        The ways to gain points in the tournament.</span>
<span class="sd">    reward_set: :obj:`list` of :class:`RewardEntry`</span>
<span class="sd">        The list of rewards awarded for the specified ranges.</span>
<span class="sd">    archived_tournaments: :obj:`list` of :class:`TournamentEntry`</span>
<span class="sd">        The list of other archived tournaments. This is only present when viewing an archived tournament.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;phase&quot;</span><span class="p">,</span>
        <span class="s2">&quot;start_date&quot;</span><span class="p">,</span>
        <span class="s2">&quot;end_date&quot;</span><span class="p">,</span>
        <span class="s2">&quot;worlds&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rule_set&quot;</span><span class="p">,</span>
        <span class="s2">&quot;score_set&quot;</span><span class="p">,</span>
        <span class="s2">&quot;reward_set&quot;</span><span class="p">,</span>
        <span class="s2">&quot;archived_tournaments&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">_serializable_properties</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;duration&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rewards_range&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cycle&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">try_enum</span><span class="p">(</span><span class="n">TournamentPhase</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;phase&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start_date&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;end_date&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worlds</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;worlds&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rule_set</span><span class="p">:</span> <span class="n">RuleSet</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rule_set&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_set</span><span class="p">:</span> <span class="n">ScoreSet</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;score_set&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reward_set</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RewardEntry</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;reward_set&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">archived_tournaments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TournamentEntry</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;archived_tournaments&quot;</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;&lt;</span><span class="si">{0.__class__.__name__}</span><span class="s2"> title=</span><span class="si">{0.title!r}</span><span class="s2"> phase=</span><span class="si">{0.phase!r}</span><span class="s2"> start_date=</span><span class="si">{0.start_date!r}</span><span class="s2"> &quot;</span>
                <span class="s2">&quot;end_date=</span><span class="si">{0.start_date!r}</span><span class="s2">&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rewards_range</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`tuple`:The range of ranks that might receive rewards.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reward_set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">initial_rank</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reward_set</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">last_rank</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reward_set</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">duration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`datetime.timedelta`: The total duration of the tournament.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_date</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span>

<div class="viewcode-block" id="Tournament.rewards_for_rank"><a class="viewcode-back" href="../../api.html#tibiapy.Tournament.rewards_for_rank">[docs]</a>    <span class="k">def</span> <span class="nf">rewards_for_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the rewards for a given rank, if any.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rank: :class:`int`</span>
<span class="sd">            The rank to check.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`RewardEntry`, optional:</span>
<span class="sd">            The rewards for the given rank or None if there are no rewards.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">rewards</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">reward_set</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rewards</span><span class="o">.</span><span class="n">initial_rank</span> <span class="o">&lt;=</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="n">rewards</span><span class="o">.</span><span class="n">last_rank</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">rewards</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Tournament.from_content"><a class="viewcode-back" href="../../api.html#tibiapy.Tournament.from_content">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_content</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an instance of the class from the html content of the tournament&#39;s page.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        content: :class:`str`</span>
<span class="sd">            The HTML content of the page.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`Tournament`</span>
<span class="sd">            The tournament contained in the page, or None if the tournament doesn&#39;t exist.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        InvalidContent</span>
<span class="sd">            If content is not the HTML of a tournament&#39;s page.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;An internal error has occurred&quot;</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="s2">&quot;Currently there is no Tournament running.&quot;</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">parsed_content</span> <span class="o">=</span> <span class="n">parse_tibiacom_content</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">builder</span><span class="o">=</span><span class="s1">&#39;html5lib&#39;</span><span class="p">)</span>
            <span class="n">box_content</span> <span class="o">=</span> <span class="n">parsed_content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;BoxContent&quot;</span><span class="p">})</span>
            <span class="n">tables</span> <span class="o">=</span> <span class="n">box_content</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;Table5&quot;</span><span class="p">})</span>
            <span class="n">archive_table</span> <span class="o">=</span> <span class="n">box_content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;Table4&quot;</span><span class="p">})</span>
            <span class="n">tournament_details_table</span> <span class="o">=</span> <span class="n">tables</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">info_tables</span> <span class="o">=</span> <span class="n">tournament_details_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;TableContent&#39;</span><span class="p">})</span>
            <span class="n">main_info</span> <span class="o">=</span> <span class="n">info_tables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">rule_set</span> <span class="o">=</span> <span class="n">info_tables</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">score_set</span> <span class="o">=</span> <span class="n">info_tables</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">reward_set</span> <span class="o">=</span> <span class="n">info_tables</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">tournament</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
            <span class="n">tournament</span><span class="o">.</span><span class="n">_parse_tournament_info</span><span class="p">(</span><span class="n">main_info</span><span class="p">)</span>
            <span class="n">tournament</span><span class="o">.</span><span class="n">_parse_tournament_rules</span><span class="p">(</span><span class="n">rule_set</span><span class="p">)</span>
            <span class="n">tournament</span><span class="o">.</span><span class="n">_parse_tournament_scores</span><span class="p">(</span><span class="n">score_set</span><span class="p">)</span>
            <span class="n">tournament</span><span class="o">.</span><span class="n">_parse_tournament_rewards</span><span class="p">(</span><span class="n">reward_set</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">archive_table</span><span class="p">:</span>
                <span class="n">tournament</span><span class="o">.</span><span class="n">_parse_archive_list</span><span class="p">(</span><span class="n">archive_table</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tournament</span>
        <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidContent</span><span class="p">(</span><span class="s2">&quot;content does not belong to the Tibia.com&#39;s tournament section&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_parse_tournament_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the tournament info table.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        table: :class:`bs4.BeautifulSoup`</span>
<span class="sd">            The parsed table containing the tournament&#39;s information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
        <span class="n">date_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;start_date&quot;</span><span class="p">,</span> <span class="s2">&quot;end_date&quot;</span><span class="p">)</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;worlds&quot;</span><span class="p">,)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">cols_raw</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">ele</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">cols_raw</span><span class="p">]</span>
            <span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">cols</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xa0</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xa0</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">date_fields</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">parse_tibia_datetime</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">list_fields</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">split_list</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field</span> <span class="o">==</span> <span class="s2">&quot;phase&quot;</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">try_enum</span><span class="p">(</span><span class="n">TournamentPhase</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_parse_tournament_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the tournament rules table.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        table: :class:`bs4.BeautifulSoup`</span>
<span class="sd">            The table containing the tournament rule set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
        <span class="n">bool_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;playtime_reduced_only_in_combat&quot;</span><span class="p">,</span> <span class="s2">&quot;shared_xp_bonus&quot;</span><span class="p">)</span>
        <span class="n">float_fields</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;death_penalty_modifier&quot;</span><span class="p">,</span>
            <span class="s2">&quot;xp_multiplier&quot;</span><span class="p">,</span>
            <span class="s2">&quot;skill_multiplier&quot;</span><span class="p">,</span>
            <span class="s2">&quot;spawn_rate_multiplier&quot;</span><span class="p">,</span>
            <span class="s2">&quot;loot_probability&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">int_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;rent_percentage&quot;</span><span class="p">,</span> <span class="s2">&quot;house_auction_durations&quot;</span><span class="p">)</span>
        <span class="n">rules</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">cols_raw</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">ele</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">cols_raw</span><span class="p">]</span>
            <span class="n">field</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span> <span class="o">=</span> <span class="n">cols</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xa0</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xa0</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">bool_fields</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;yes&quot;</span>
            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">float_fields</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">int_fields</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="n">rules</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rule_set</span> <span class="o">=</span> <span class="n">RuleSet</span><span class="p">(</span><span class="o">**</span><span class="n">rules</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_parse_tournament_scores</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the tournament scores table.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        table: :class:`bs4.BeautifulSoup`</span>
<span class="sd">            The parsed table containing the tournament score set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">creatures</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
        <span class="n">rules</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">cols_raw</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">ele</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">cols_raw</span><span class="p">]</span>
            <span class="n">field</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span> <span class="o">=</span> <span class="n">cols</span>
            <span class="n">icon</span> <span class="o">=</span> <span class="n">cols_raw</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">)</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xa0</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^-0-9]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;+/-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">icon</span><span class="p">:</span>
                <span class="n">creatures</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rules</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_integer</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;creature_kills&quot;</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
            <span class="n">rules</span><span class="p">[</span><span class="s2">&quot;creature_kills&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">creatures</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_set</span> <span class="o">=</span> <span class="n">ScoreSet</span><span class="p">(</span><span class="o">**</span><span class="n">rules</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_parse_tournament_rewards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the reward section of the tournament information section.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        table: :class:`bs4.BeautifulSoup`</span>
<span class="sd">            The parsed table containing the information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
        <span class="n">rewards</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">cols_raw</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)</span>
            <span class="n">rank_row</span><span class="p">,</span> <span class="o">*</span><span class="n">rewards_cols</span> <span class="o">=</span> <span class="n">cols_raw</span>
            <span class="n">rank_text</span> <span class="o">=</span> <span class="n">rank_row</span><span class="o">.</span><span class="n">text</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">rank_text</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">first</span><span class="p">,</span> <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_rank_range</span><span class="p">(</span><span class="n">rank_text</span><span class="p">)</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="n">RewardEntry</span><span class="p">(</span><span class="n">initial_rank</span><span class="o">=</span><span class="n">first</span><span class="p">,</span> <span class="n">last_rank</span><span class="o">=</span><span class="n">last</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">rewards_cols</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_rewards_column</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>
            <span class="n">rewards</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reward_set</span> <span class="o">=</span> <span class="n">rewards</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_parse_rewards_column</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">entry</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse a column from the tournament&#39;s reward section.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        column: :class:`bs4.BeautifulSoup`</span>
<span class="sd">            The parsed content of the column.</span>
<span class="sd">        entry: :class:`RewardEntry`</span>
<span class="sd">            The reward entry where the data will be stored to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">col_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">column</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">img</span> <span class="ow">and</span> <span class="s2">&quot;tibiacoin&quot;</span> <span class="ow">in</span> <span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">]:</span>
            <span class="n">entry</span><span class="o">.</span><span class="n">tibia_coins</span> <span class="o">=</span> <span class="n">parse_integer</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">img</span> <span class="ow">and</span> <span class="s2">&quot;tournamentcoin&quot;</span> <span class="ow">in</span> <span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">]:</span>
            <span class="n">entry</span><span class="o">.</span><span class="n">tournament_coins</span> <span class="o">=</span> <span class="n">parse_integer</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">img</span> <span class="ow">and</span> <span class="s2">&quot;tournamentvoucher&quot;</span> <span class="ow">in</span> <span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">]:</span>
            <span class="n">entry</span><span class="o">.</span><span class="n">tournament_ticker_voucher</span> <span class="o">=</span> <span class="n">parse_integer</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">img</span> <span class="ow">and</span> <span class="s2">&quot;trophy&quot;</span> <span class="ow">in</span> <span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">]:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">CUP_PATTERN</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">col_str</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
                <span class="n">entry</span><span class="o">.</span><span class="n">cup</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">DEED_PATTERN</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">col_str</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
                <span class="n">entry</span><span class="o">.</span><span class="n">deed</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">img</span> <span class="ow">and</span> <span class="s2">&quot;reward&quot;</span> <span class="ow">in</span> <span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">]:</span>
            <span class="n">span</span> <span class="o">=</span> <span class="n">column</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;HelperDivIndicator&quot;</span><span class="p">})</span>
            <span class="n">mouse_over</span> <span class="o">=</span> <span class="n">span</span><span class="p">[</span><span class="s2">&quot;onmouseover&quot;</span><span class="p">]</span>
            <span class="n">title</span><span class="p">,</span> <span class="n">popup</span> <span class="o">=</span> <span class="n">parse_popup</span><span class="p">(</span><span class="n">mouse_over</span><span class="p">)</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">popup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;ItemOverLabel&#39;</span><span class="p">})</span>
            <span class="n">entry</span><span class="o">.</span><span class="n">other_rewards</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_parse_rank_range</span><span class="p">(</span><span class="n">rank_text</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the rank range text from the reward set table.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rank_text: :class:`str`</span>
<span class="sd">            The string describing the ranks.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`tuple` of :class:`int`</span>
<span class="sd">            A tuple containing the highest and lower rank for this reward bracket.</span>

<span class="sd">            If the reward is for a single rank, both tuple elements will be the same.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">RANGE_PATTERN</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">rank_text</span><span class="p">)</span>
        <span class="n">first</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">first</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">last</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span>

    <span class="k">def</span> <span class="nf">_parse_archive_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">archive_table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the archive list table.</span>

<span class="sd">        This table is only visible when viewing a tournament from the archive.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        archive_table: :class:`bs4.Tag`</span>
<span class="sd">            The parsed element containing the table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_</span><span class="p">,</span> <span class="o">*</span><span class="n">options</span> <span class="o">=</span> <span class="n">archive_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;option&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">archived_tournaments</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">ARCHIVE_LIST_PATTERN</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">start_date</span> <span class="o">=</span> <span class="n">parse_tibia_full_date</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">end_date</span> <span class="o">=</span> <span class="n">parse_tibia_full_date</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">option</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">archived_tournaments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TournamentEntry</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="n">end_date</span><span class="p">,</span>
                                                             <span class="n">cycle</span><span class="o">=</span><span class="n">value</span><span class="p">))</span></div>


<div class="viewcode-block" id="TournamentLeaderboard"><a class="viewcode-back" href="../../api.html#tibiapy.TournamentLeaderboard">[docs]</a><span class="k">class</span> <span class="nc">TournamentLeaderboard</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a tournament&#39;s leaderboards.</span>

<span class="sd">    .. versionadded:: 2.5.0</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    world: :class:`str`</span>
<span class="sd">        The world this leaderboard belongs to.</span>
<span class="sd">    tournament: :class:`TournamentEntry`</span>
<span class="sd">        The tournament this leaderboard belongs to.</span>
<span class="sd">    entries: :obj:`list` of :class:`TournamentLeaderboardEntry`</span>
<span class="sd">        The leaderboard entries.</span>
<span class="sd">    results_count: :class:`int`</span>
<span class="sd">        The total number of leaderboard entries. These might be in a different page.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ENTRIES_PER_PAGE</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;world&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tournament&quot;</span><span class="p">,</span>
        <span class="s2">&quot;entries&quot;</span><span class="p">,</span>
        <span class="s2">&quot;results_count&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">_serializable_properties</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;page&quot;</span><span class="p">,</span>
        <span class="s2">&quot;total_pages&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;world&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tournament</span><span class="p">:</span> <span class="n">TournamentEntry</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tournament&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TournamentLeaderboardEntry</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entries&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">results_count</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results_count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> world=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="si">!r}</span><span class="s2"> tournament=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tournament</span><span class="si">}</span><span class="s2"> &quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;results_count=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">results_count</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">from_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`int`: The starting rank of the provided entries.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">to_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`int`: The last rank of the provided entries.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`int`: The page number the shown results correspond to on Tibia.com.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">from_rank</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ENTRIES_PER_PAGE</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_rank</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total_pages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`int`: The total of pages in the leaderboard.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">results_count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ENTRIES_PER_PAGE</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:class:`str`: Get the URL to the current leaderboard and page.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tournament</span><span class="o">.</span><span class="n">cycle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">)</span>

<div class="viewcode-block" id="TournamentLeaderboard.get_url"><a class="viewcode-back" href="../../api.html#tibiapy.TournamentLeaderboard.get_url">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_url</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">tournament_cycle</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the URL to the leaderboards of a specific world, tournament and page.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        world: :class:`str`</span>
<span class="sd">            The world to get the leaderboards for.</span>
<span class="sd">        tournament_cycle: :class:`int`</span>
<span class="sd">            The cycle of the tournament to get the leaderboards for.</span>
<span class="sd">        page: :class:`int`</span>
<span class="sd">            The leader board&#39;s page to view. By default 1.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The URL to the specified leaderboard.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">get_tibia_url</span><span class="p">(</span><span class="s2">&quot;community&quot;</span><span class="p">,</span> <span class="s2">&quot;tournamentleaderboards&quot;</span><span class="p">,</span> <span class="n">tournamentworld</span><span class="o">=</span><span class="n">world</span><span class="p">,</span>
                             <span class="n">tournamentcycle</span><span class="o">=</span><span class="n">tournament_cycle</span><span class="p">,</span> <span class="n">selectedleaderboardpage</span><span class="o">=</span><span class="n">page</span><span class="p">)</span></div>

<div class="viewcode-block" id="TournamentLeaderboard.from_content"><a class="viewcode-back" href="../../api.html#tibiapy.TournamentLeaderboard.from_content">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_content</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an instance of the class from the html content of the tournament&#39;s leaderboards page.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        content: :class:`str`</span>
<span class="sd">            The HTML content of the page.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`TournamentLeaderboard`</span>
<span class="sd">            The tournament contained in the page, or None if the tournament leaderboard doesn&#39;t exist.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        InvalidContent</span>
<span class="sd">            If content is not the HTML of a tournament&#39;s leaderboard page.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parsed_content</span> <span class="o">=</span> <span class="n">parse_tibiacom_content</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="n">tables</span> <span class="o">=</span> <span class="n">parsed_content</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;TableContainer&#39;</span><span class="p">})</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">tables</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">InvalidContent</span><span class="p">(</span><span class="s2">&quot;content does not belong to the Tibia.com&#39;s tournament leaderboards section&quot;</span><span class="p">)</span>
            <span class="n">selector_table</span> <span class="o">=</span> <span class="n">tables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">leaderboard</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">leaderboard</span><span class="o">.</span><span class="n">_parse_leaderboard_selectors</span><span class="p">(</span><span class="n">selector_table</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">ranking_table</span> <span class="o">=</span> <span class="n">tables</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">leaderboard</span><span class="o">.</span><span class="n">_parse_leaderboard_entries</span><span class="p">(</span><span class="n">ranking_table</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">leaderboard</span>
        <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidContent</span><span class="p">(</span><span class="s2">&quot;content does not belong to the Tibia.com&#39;s tournament leaderboards section&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_parse_leaderboard_selectors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selector_table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the option selectors from the leaderboards to get their information.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        selector_table: :class:`bs4.BeautifulSoup`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`bool`</span>
<span class="sd">            Whether the selectors could be parsed or not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">world_select</span> <span class="o">=</span> <span class="n">selector_table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tournamentworld&quot;</span><span class="p">})</span>
        <span class="n">selected_world</span> <span class="o">=</span> <span class="n">world_select</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;option&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="s2">&quot;selected&quot;</span><span class="p">})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">selected_world</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">world</span> <span class="o">=</span> <span class="n">selected_world</span><span class="o">.</span><span class="n">text</span>
        <span class="n">tournament_select</span> <span class="o">=</span> <span class="n">selector_table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tournamentcycle&quot;</span><span class="p">})</span>
        <span class="n">selected_tournament</span> <span class="o">=</span> <span class="n">tournament_select</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;option&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="s2">&quot;selected&quot;</span><span class="p">})</span>
        <span class="n">tournament_text</span> <span class="o">=</span> <span class="n">selected_tournament</span><span class="o">.</span><span class="n">text</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">end_date</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">cycle</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">selected_tournament</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;current tournament&quot;</span> <span class="ow">in</span> <span class="n">tournament_text</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">tournament_title</span> <span class="o">=</span> <span class="n">CURRENT_TOURNAMENT_PATTERN</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\g&lt;1&gt;&quot;</span><span class="p">,</span> <span class="n">tournament_text</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">ARCHIVE_LIST_PATTERN</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">tournament_text</span><span class="p">)</span>
            <span class="n">tournament_title</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">start_date</span> <span class="o">=</span> <span class="n">parse_tibia_full_date</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">end_date</span> <span class="o">=</span> <span class="n">parse_tibia_full_date</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tournament</span> <span class="o">=</span> <span class="n">TournamentEntry</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">tournament_title</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="n">end_date</span><span class="p">,</span>
                                          <span class="n">cycle</span><span class="o">=</span><span class="n">cycle</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_parse_leaderboard_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ranking_table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the leaderboards&#39; entries.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ranking_table: :class:`bs4.BeautifulSoup`</span>
<span class="sd">            The table containing the rankings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ranking_table_content</span> <span class="o">=</span> <span class="n">ranking_table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;TableContent&quot;</span><span class="p">})</span>
        <span class="n">header</span><span class="p">,</span> <span class="o">*</span><span class="n">rows</span> <span class="o">=</span> <span class="n">ranking_table_content</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">raw_columns</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">raw_columns</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">raw_columns</span><span class="p">]</span>
            <span class="n">rank_and_change</span><span class="p">,</span> <span class="n">character</span><span class="p">,</span> <span class="n">vocation</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="n">cols</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">RANK_PATTERN</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">rank_and_change</span><span class="p">)</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">change</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">voc</span> <span class="o">=</span> <span class="n">try_enum</span><span class="p">(</span><span class="n">Vocation</span><span class="p">,</span> <span class="n">vocation</span><span class="p">)</span>
            <span class="n">score</span> <span class="o">=</span> <span class="n">parse_integer</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TournamentLeaderboardEntry</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="n">rank</span><span class="p">,</span> <span class="n">change</span><span class="o">=</span><span class="n">change</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">character</span><span class="p">,</span> <span class="n">vocation</span><span class="o">=</span><span class="n">voc</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="n">score</span><span class="p">))</span>
        <span class="c1"># Results footer</span>
        <span class="n">small</span> <span class="o">=</span> <span class="n">ranking_table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;small&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">small</span><span class="p">:</span>
            <span class="n">pagination_text</span> <span class="o">=</span> <span class="n">small</span><span class="o">.</span><span class="n">text</span>
            <span class="n">results_str</span> <span class="o">=</span> <span class="n">RESULTS_PATTERN</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pagination_text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">results_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">results_str</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span> <span class="o">=</span> <span class="n">entries</span></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Tibia.py</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Galarzaa90&repo=tibia.py&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/Galarzaa90/tibia.py">
    <img
        alt="https://secure.travis-ci.org/Galarzaa90/tibia.py.svg?branch=master"
        src="https://secure.travis-ci.org/Galarzaa90/tibia.py.svg?branch=master"
    />
</a>
</p>


<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>


<h3 class="donation">Donate/support</h3>



<p>
<a class="badge" href="https://beerpay.io/Galarzaa90/tibia.py">
<img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate">
</a>
</p>





        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2021, Allan Galarza.
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 6.1.3.
  </div>
  
  </body>
</html>